<footer class="main">
    {{-- <section class="newsletter mb-15 wow animate__animated animate__fadeIn">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="position-relative newsletter-inner">
                        <div class="newsletter-content">
                            <h2 class="mb-20">
                                Stay home & get your daily <br />
                                needs from our shop
                            </h2>
                            <p class="mb-45">Start You'r Daily Shopping with <span class="text-brand">Nest Mart</span></p>
                            <form class="form-subcriber d-flex">
                                <input type="email" placeholder="Your emaill address" />
                                <button class="btn" type="submit">Subscribe</button>
                            </form>
                        </div>
                        <img src="{{asset("frontend/assets/imgs/banner/banner-9.png")}}" alt="newsletter" />
                    </div>
                </div>
            </div>
        </div>
    </section> --}}
    <section class="featured section-padding">
        <div class="container">
            <div class="row">
                <div class="col-lg-1-5 col-md-4 col-12 col-sm-6 mb-md-4 mb-xl-0">
                    <div class="banner-left-icon d-flex align-items-center wow animate__animated animate__fadeInUp" data-wow-delay="0">
                        <div class="banner-icon">
                            <img src="{{asset("frontend/assets/imgs/theme/icons/icon-1.svg")}}" alt="" />
                        </div>
                        <div class="banner-text">
                            <h3 class="icon-box-title">Best offers</h3>
                            <p>Orders $50 or more</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-1-5 col-md-4 col-12 col-sm-6">
                    <div class="banner-left-icon d-flex align-items-center wow animate__animated animate__fadeInUp" data-wow-delay=".1s">
                        <div class="banner-icon">
                            <img src="{{asset("frontend/assets/imgs/theme/icons/icon-2.svg")}}" alt="" />
                        </div>
                        <div class="banner-text">
                            <h3 class="icon-box-title">Free delivery</h3>
                            <p>24/7 amazing services</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-1-5 col-md-4 col-12 col-sm-6">
                    <div class="banner-left-icon d-flex align-items-center wow animate__animated animate__fadeInUp" data-wow-delay=".2s">
                        <div class="banner-icon">
                            <img src="{{asset("frontend/assets/imgs/theme/icons/icon-3.svg")}}" alt="" />
                        </div>
                        <div class="banner-text">
                            <h3 class="icon-box-title">Great daily deal</h3>
                            <p>When you sign up</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-1-5 col-md-4 col-12 col-sm-6">
                    <div class="banner-left-icon d-flex align-items-center wow animate__animated animate__fadeInUp" data-wow-delay=".3s">
                        <div class="banner-icon">
                            <img src="{{asset("frontend/assets/imgs/theme/icons/icon-4.svg")}}" alt="" />
                        </div>
                        <div class="banner-text">
                            <h3 class="icon-box-title">Wide assortment</h3>
                            <p>Mega Discounts</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-1-5 col-md-4 col-12 col-sm-6">
                    <div class="banner-left-icon d-flex align-items-center wow animate__animated animate__fadeInUp" data-wow-delay=".4s">
                        <div class="banner-icon">
                            <img src="{{asset("frontend/assets/imgs/theme/icons/icon-5.svg")}}" alt="" />
                        </div>
                        <div class="banner-text">
                            <h3 class="icon-box-title">Easy returns</h3>
                            <p>Within 30 days</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-1-5 col-md-4 col-12 col-sm-6 d-xl-none">
                    <div class="banner-left-icon d-flex align-items-center wow animate__animated animate__fadeInUp" data-wow-delay=".5s">
                        <div class="banner-icon">
                            <img src="{{asset("frontend/assets/imgs/theme/icons/icon-6.svg")}}" alt="" />
                        </div>
                        <div class="banner-text">
                            <h3 class="icon-box-title">Safe delivery</h3>
                            <p>Within 30 days</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="section-padding footer-mid">
        <div class="container pt-15 pb-20">
            <div class="row">
                <div class="col">
                    <div class="widget-about font-md mb-md-3 mb-lg-3 mb-xl-0 wow animate__animated animate__fadeInUp" data-wow-delay="0">
                        <div class="logo mb-30">
                            <a href="/" class="mb-5"><img src="{{asset("logos/new-logo-bg-4.png")}}" alt="logo" style="width:250px"/></a>
                            <p class="font-lg text-heading">Awesome shopping store website</p>
                        </div>
                        <ul class="contact-infor">
                            <li><img src="{{asset("frontend/assets/imgs/theme/icons/icon-location.svg")}}" alt="" /><strong>Address: </strong> <span>5171 W Campbell Ave undefined Kent, Utah 53127 United States</span></li>
                            <li><img src="{{asset("frontend/assets/imgs/theme/icons/icon-contact.svg")}}" alt="" /><strong>Call Us:</strong><span>(+91) - 540-025-124553</span></li>
                            <li><img src="{{asset("frontend/assets/imgs/theme/icons/icon-email-2.svg")}}" alt="" /><strong>Email:</strong><span>sale@Nest.com</span></li>
                            <li><img src="{{asset("frontend/assets/imgs/theme/icons/icon-clock.svg")}}" alt="" /><strong>Hours:</strong><span>10:00 - 18:00, Mon - Sat</span></li>
                        </ul>
                    </div>
                </div>
                <div class="footer-link-widget col wow animate__animated animate__fadeInUp" data-wow-delay=".1s">
                <h4 class="widget-title">Company</h4>
                <ul class="footer-list mb-sm-5 mb-md-0">
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Delivery Information</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Terms &amp; Conditions</a></li>
                    <li><a href="#">Contact Us</a></li>
                    <li><a href="#">Support Center</a></li>
                    <li><a href="#">Careers</a></li>
                </ul>
            </div>
            <div class="footer-link-widget col wow animate__animated animate__fadeInUp" data-wow-delay=".2s">
                <h4 class="widget-title">Account</h4>
                <ul class="footer-list mb-sm-5 mb-md-0">
                    <li><a href="#">Sign In</a></li>
                    <li><a href="#">View Cart</a></li>
                    <li><a href="#">My Wishlist</a></li>
                    <li><a href="#">Track My Order</a></li>
                    <li><a href="#">Help Ticket</a></li>
                    <li><a href="#">Shipping Details</a></li>
                    <li><a href="#">Compare products</a></li>
                </ul>
            </div>
            <div class="footer-link-widget col wow animate__animated animate__fadeInUp" data-wow-delay=".3s">
                <h4 class="widget-title">Corporate</h4>
                <ul class="footer-list mb-sm-5 mb-md-0">
                    <li><a href="#">Become a Vendor</a></li>
                    <li><a href="#">Affiliate Program</a></li>
                    <li><a href="#">Farm Business</a></li>
                    <li><a href="#">Farm Careers</a></li>
                    <li><a href="#">Our Suppliers</a></li>
                    <li><a href="#">Accessibility</a></li>
                    <li><a href="#">Promotions</a></li>
                </ul>
            </div>
            <div class="footer-link-widget col wow animate__animated animate__fadeInUp" data-wow-delay=".4s">
                <h4 class="widget-title">Popular</h4>
                <ul class="footer-list mb-sm-5 mb-md-0">
                    <li><a href="#">Milk & Flavoured Milk</a></li>
                    <li><a href="#">Butter and Margarine</a></li>
                    <li><a href="#">Eggs Substitutes</a></li>
                    <li><a href="#">Marmalades</a></li>
                    <li><a href="#">Sour Cream and Dips</a></li>
                    <li><a href="#">Tea & Kombucha</a></li>
                    <li><a href="#">Cheese</a></li>
                </ul>
            </div>
        </div>
    </section>
    <div class="container pb-30 wow animate__animated animate__fadeInUp" data-wow-delay="0">
        <div class="row align-items-center">
            <div class="col-12 mb-30">
                <div class="footer-bottom"></div>
            </div>
            <div class="col-xl-4 col-lg-6 col-md-6">
                <p class="font-sm mb-0">&copy; 2022, <strong class="text-brand">Roshan</strong> - Laravel Ecommerce <br />All rights reserved</p>
            </div>
            <div class="col-xl-4 col-lg-6 text-center d-none d-xl-block">
                <div class="hotline d-lg-inline-flex">
                    <img src="{{asset("frontend/assets/imgs/theme/icons/phone-call.svg")}}" alt="hotline" />
                    <p>1900 - 8888<span>24/7 Support Center</span></p>
                </div>
            </div>
            <div class="col-xl-4 col-lg-6 col-md-6 text-end d-none d-md-block">
                <div class="mobile-social-icon">
                    <h6>Follow Us</h6>
                    <a href="#"><img src="{{asset("frontend/assets/imgs/theme/icons/icon-facebook-white.svg")}}" alt="" /></a>
                    <a href="#"><img src="{{asset("frontend/assets/imgs/theme/icons/icon-twitter-white.svg")}}" alt="" /></a>
                    <a href="#"><img src="{{asset("frontend/assets/imgs/theme/icons/icon-instagram-white.svg")}}" alt="" /></a>
                    <a href="#"><img src="{{asset("frontend/assets/imgs/theme/icons/icon-pinterest-white.svg")}}" alt="" /></a>
                    <a href="#"><img src="{{asset("frontend/assets/imgs/theme/icons/icon-youtube-white.svg")}}" alt="" /></a>
                </div>
                <p class="font-sm">Up to 15% discount on your first subscribe</p>
            </div>
        </div>
    </div>
</footer>
<!-- Preloader Start -->
{{-- @if (Route::is('welcome'))
<div id="preloader-active">
    <div class="preloader d-flex align-items-center justify-content-center">
        <div class="preloader-inner position-relative">
            <div class="text-center">
                <img src="{{asset("frontend/assets/imgs/theme/loading.gif")}}" alt="" />
            </div>
        </div>
    </div>
</div>
@endif --}}
<!-- Vendor JS-->
{{-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> --}}
<script src="{{asset("frontend/assets/js/vendor/modernizr-3.6.0.min.js")}}"></script>
<script src="{{asset("frontend/assets/js/vendor/jquery-3.6.0.min.js")}}"></script>
<script src="{{asset("frontend/assets/js/vendor/jquery-migrate-3.3.0.min.js")}}"></script>
<script src="{{asset("frontend/assets/js/vendor/bootstrap.bundle.min.js")}}"></script>
<script src="{{asset("frontend/assets/js/plugins/slick.js")}}"></script>
<script src="{{asset("frontend/assets/js/plugins/jquery.syotimer.min.js")}}"></script>
<script src="{{asset("frontend/assets/js/plugins/waypoints.js")}}"></script>
<script src="{{asset("frontend/assets/js/plugins/wow.js")}}"></script>
<script src="{{asset("frontend/assets/js/plugins/slider-range.js")}}"></script>
<script src="{{asset("frontend/assets/js/plugins/perfect-scrollbar.js")}}"></script>
<script src="{{asset("frontend/assets/js/plugins/magnific-popup.js")}}"></script>
<script src="{{asset("frontend/assets/js/plugins/select2.min.js")}}"></script>
<script src="{{asset("frontend/assets/js/plugins/counterup.js")}}"></script>
<script src="{{asset("frontend/assets/js/plugins/jquery.countdown.min.js")}}"></script>
<script src="{{asset("frontend/assets/js/plugins/images-loaded.js")}}"></script>
<script src="{{asset("frontend/assets/js/plugins/isotope.js")}}"></script>
<script src="{{asset("frontend/assets/js/plugins/scrollup.js")}}"></script>
<script src="{{asset("frontend/assets/js/plugins/jquery.vticker-min.js")}}"></script>
<script src="{{asset("frontend/assets/js/plugins/jquery.theia.sticky.js")}}"></script>
<script src="{{asset("frontend/assets/js/plugins/jquery.elevatezoom.js")}}"></script>
<!-- Template  JS -->
<!-- <script type="text/javascript">
    $(document).ready(function() {
        $(window).load(function() {
            function Preloader() {
                var preloader = $('#preloader-active');
                preloader.fadeOut("slow");
                $("body").css({
                    overflow: "visible"
                });
                $("#onloadModal").modal("show");
            }
            if ( ! sessionStorage.getItem( 'doNotShow' ) ) {
                sessionStorage.setItem( 'doNotShow', 'true' );
                Preloader();
            } else {
                $("#preloader-active").hide();
            }
        });
    });
</script> -->

<script src="{{asset("frontend/assets/js/main.js")}}"></script>
<script src="{{asset("frontend/assets/js/shop.js")}}"></script>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<!-- add to cart -->
<script type="text/javascript">
    $.ajaxSetup({
        headers:{
            'X-CSRF-TOKEN':$('meta[name="csrf-token"]').attr('content')
        }
    });
    // Start Product View with Modal
    function productView(id){
        // alert(id)
        $.ajax({
            type: 'GET',
            url: '/products/view/modal/'+id,
            dataType:'json',
            success:function(data){

                //price
                $('span[name="price"]').empty();
                $('span[name="discount"]').empty();
                if(data.product.discount_price != null){
                    $('span[name="price"]').append('$<span id="discount_price"></span>')

                    $dis = (data.product.base_price) - (data.product.discount_price);
                    $dis_per = ($dis/(data.product.base_price))*100;

                    $('span[name="discount"]').append('<span>'+Math.round($dis_per)+'% Off</span>')
                }else{
                    $('span[name="price"]').append('$<span id="selling_price"></span>')

                    $dis = (data.product.base_price) - (data.product.selling_price);
                    $dis_per = ($dis/(data.product.base_price))*100;

                    $('span[name="discount"]').append('<span>'+Math.round($dis_per)+'% Off</span>')
                }

                // console.log(data);
                $('#pname').text(data.product.product_name);
                $('#base_price').text(data.product.base_price);
                $('#selling_price').text(data.product.selling_price);
                $('#discount_price').text(data.product.discount_price);
                $('#sku').text(data.product.product_sku);
                $('#pbrand').text(data.product.brand.name);
                $('#pimage').attr('src','/'+data.product.product_thumbnail);
                $('#timage').attr('src','/'+data.product.product_thumbnail);

                $('#product_id').val(id);
                $('#qty').text(1);

                //size
                $('select[name="size"]').empty();
                $.each(data.size,function(key,value){
                    $('select[name="size"]').append('<option value=""></option><option value=" '+value+' ">'+value+' </option>')
                })
                if(data.size == ""){
                    $('#size_area').hide();
                }else{
                    $('#size_area').show();
                }

                //multiimages
                // $('div[name="multiImages"]').empty();
                // $.each(data.multiImages,function(key,value){
                //     $('div[name="multiImages"]').append('<div><img src="'+value+'" alt="product image" /></div>')
                // })

                //available - out of stock
                if(data.product.product_qty > 0){
                    $('#available').text('');
                    $('#outOfStock').text('');
                    $('#available').text('Available');
                }else {
                    $('#available').text('');
                    $('#outOfStock').text('');
                    $('#outOfStock').text('Out Of Stock');
                }

                //add to cart button display
                $('#button-add-cart').empty();
                if(data.product.product_qty <= 0){
                    $('#button-add-cart').append('<span class="button button-out-of-stock-modal"><i class="fi-rs-shopping-cart"></i>Out of Stock</span>');
                }else{
                    $('#button-add-cart').append('<button type="submit" class="button button-add-to-cart" onclick="addToCart()"><i class="fi-rs-shopping-cart"></i>Add to cart</button>');
                }

                // $('#dis-stock').empty();
                if(data.product.product_qty > 0 && data.product.discount_price != null){
                    $('#dis-stock').text('');
                    $dis = (data.product.base_price) - (data.product.discount_price);
                    $dis_per = ($dis/(data.product.base_price))*100;
                    $('#dis-stock').append('-'+Math.round($dis_per)+'% Off')
                }else if(data.product.product_qty == 0){
                    $('#dis-stock').text('');
                    $('#dis-stock').text('Out Of Stock');
                }else{
                    // $('#dis-stock').hide();
                    $('#dis-stock').text('Sale');
                }

            }
        })

    }

    //Add to Cart Product
    function addToCart(){
        var product_name = $('#pname').text();
        var id = $('#product_id').val();
        var size = $('#size option:selected').text();
        var quantity = $('#qty').text();
        $.ajax({
            type: 'POST',
            dataType:'json',
            data:{
                size:size,
                quantity:quantity,
                product_name:product_name
            },
            url: '/cart/product/store/'+id,
            success:function(data){
                miniCart();
                $('#closeModal').click();
                // console.log(data)
                const Toast = Swal.mixin({
                      toast: true,
                      position: 'top-end',
                      icon: 'success',
                      showConfirmButton: false,
                      timerProgressBar: true,
                      timer: 4000,
                      width: '400px',
                    })
                if ($.isEmptyObject(data.error)) {
                    Toast.fire({
                        type: 'success',
                        title: data.success
                    })
                }else{
                    Toast.fire({
                        type: 'error',
                        title: data.error
                    })
                }
            }
        })
    }
</script>

<!-- mini cart  -->
<script type="text/javascript">
    function miniCart(){
        $.ajax({
            type: 'GET',
            url: '/product/mini/cart',
            dataType: 'json',
            success: function(response){
                // console.log(response);
                var miniCart = ""
                $.each(response.carts, function(key,value){
                    $('span[id="cartsubTotal"]').text("$"+response.cartSubTotal);
                    $('#cartQty').text(response.cartQty);
                    $('#cartQty-mobile').text(response.cartQty);
                    var name = value.name;
                    miniCart +=
                        `<li>
                            <div class="shopping-cart-img">
                                <a href="/product/${value.options.sku}/${value.id}/${value.options.slug}" target="_blank">
                                    <img alt="Nest" src="/${value.options.image}" />
                                </a>
                            </div>
                            <div class="shopping-cart-title">
                                <h4 style="font-size:12px;">
                                    <a href="/product/${value.options.sku}/${value.id}/${value.options.slug}" target="_blank">
                                        ${name.substring(0,20)}...
                                    </a>
                                </h4>
                                <h4><span>${value.options.size} - ${value.qty} Ã— </span>${value.price}</h4>
                            </div>
                            <div class="shopping-cart-delete">
                                <a type="submit" id="${value.rowId}" onclick="miniCartRemoveItem(this.id)"><i class="fi-rs-cross-small"></i></a>
                            </div>
                        </li>`
                });
                $('#miniCart').html(miniCart);
                $('#miniCart-mobile').html(miniCart);
            }
        })
    }
    miniCart();

    //mini Cart Remove Item
    function miniCartRemoveItem(rowId){
        $.ajax({
            type: 'GET',
            url: '/mini/cart/product/remove/'+rowId,
            dataType: 'json',
            success:function(data){
                miniCart();
                const Toast = Swal.mixin({
                      toast: true,
                      position: 'top-end',
                      icon: 'success',
                      showConfirmButton: false,
                      timerProgressBar: true,
                      timer: 4000,
                      width: '450px',
                    })
                if ($.isEmptyObject(data.error)) {
                    Toast.fire({
                        type: 'success',
                        title: data.success
                    })
                }else{
                    Toast.fire({
                        type: 'error',
                        title: data.error
                    })
                }
            }
        })
    }
</script>

 <!-- add to wishlist  -->
<script type="text/javascript">
    function addToWishlist(product_id){
        $.ajax({
            type: 'POST',
            dataType: 'json',
            url: '/add-to-wishlist/'+product_id,

            success: function(data){
                const Toast = Swal.mixin({
                      toast: true,
                      position: 'top-end',
                      showConfirmButton: false,
                      timerProgressBar: true,
                      timer: 4000,
                      width: '450px',
                    })
                if ($.isEmptyObject(data.error)) {
                    Toast.fire({
                        icon: 'success',
                        type: 'success',
                        title: data.success
                    })
                }else{
                    Toast.fire({
                        icon: 'error',
                        type: 'error',
                        title: data.error
                    })
                }
            }
        })
    }
</script>

 <!-- load wishlist data  -->
<script type="text/javascript">
    function wishlist(){
        $.ajax({
            type: 'GET',
            url: '/get-wishlist-product',
            dataType: 'json',
            success: function(response){
                // console.log(response);
                var rows = ""
                $.each(response, function(key,value){
                    rows +=
                        `<div class="col-lg-1-5 col-md-4 col-12 col-sm-6">
                            <div class="product-cart-wrap mb-30">
                                <div class="product-img-action-wrap">
                                    <div class="product-img product-img-zoom">
                                        <a href="/product/${value.product.product_sku}/${value.product_id}/${value.product.product_slug}" target="_blank">
                                            <img class="default-img" src="/${value.product.product_thumbnail}" alt="" />
                                            <img class="hover-img" src="/${value.product.product_thumbnail}" alt="" />
                                        </a>
                                    </div>
                                    <div class="product-action-1 d-flex flex-row">
                                        <a aria-label="Remove" class="action-btn" type="submit" id="${value.id}" onclick="wishlistRemoveItem(this.id)"><i class="fi-rs-trash"></i></a>
                                        <a aria-label="Quick view" class="action-btn" data-bs-toggle="modal" data-bs-target="#quickViewModal" id="${value.product_id}" onclick="productView(this.id)"><i class="fi-rs-eye"></i></a>
                                    </div>
                                </div>
                                <div class="product-content-wrap">
                                    <div class="product-category">
                                        
                                    </div>
                                    <h2 id="product-title-h2"><a href="/product/${value.product.product_sku}/${value.product_id}/${value.product.product_slug}" target="_blank">${value.product.product_name.substring(0,25)}...</a></h2>
                                    <div class="product-rate-cover">
                                        <div class="product-rate d-inline-block">
                                            <div class="product-rating" style="width: 90%"></div>
                                        </div>
                                        <span class="font-small ml-5 text-muted"> (4.0)</span>
                                    </div>
                                    <div class="product-card-bottom">
                                        <div class="product-price">
                                            <span>
                                                $${value.product.discount_price == null ? `${value.product.selling_price}` : `${value.product.discount_price}`}
                                            </span>
                                            <span class="old-price">$${value.product.base_price}</span>
                                        </div>
                                        <div class="add-cart">
                                            <a class="add" data-bs-toggle="modal" data-bs-target="#quickViewModal" id="${value.product_id}" onclick="productView(this.id)"><i class="fi-rs-shopping-cart mr-5"></i>Add </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>`
                });
                $('#wishlist').html(rows);
            }
        })
    }
    wishlist();

    //wishlist remove item
    function wishlistRemoveItem(id){
        $.ajax({
            type: 'GET',
            url: '/wishlist/product/remove/'+id,
            dataType: 'json',
            success:function(data){
                wishlist();
                const Toast = Swal.mixin({
                      toast: true,
                      position: 'top-end',
                      showConfirmButton: false,
                      timerProgressBar: true,
                      timer: 4000,
                      width: '450px',
                    })
                if ($.isEmptyObject(data.error)) {
                    Toast.fire({
                        type: 'success',
                        icon: 'success',
                        title: data.success
                    })
                }else{
                    Toast.fire({
                        type: 'error',
                        icon: 'error',
                        title: data.error
                    })
                }
            }
        })
    }
</script>

<!-- load my cart -->
<script type="text/javascript">
    function cart(){
        $.ajax({
            type: 'GET',
            url: '/get-cart-product',
            dataType: 'json',
            success: function(response){
                // console.log(response);
                var rows = ""
                $.each(response.carts, function(key,value){
                    console.log(value.options.brand)
                    rows +=
                        `<tr class="pt-20">
                                <td class="image product-thumbnail pt-20"><img src="/${value.options.image}" alt="#" style="max-width:80px;"></td>
                                <td class="product-des product-name">
                                    <span class="text-muted">${value.options.brand_name}</span>
                                    <h6 class="mb-5"><a class="product-name mb-10 text-heading" href="/product/${value.options.sku}/${value.id}/${value.options.slug}" target="_blank">${value.name.substring(0,30)}...</a></h6>
                                    <div class="product-rate-cover">
                                        <div class="product-rate d-inline-block">
                                            <div class="product-rating" style="width:90%">
                                            </div>
                                        </div>
                                        <span class="font-small ml-5 text-muted"> (4.0)</span>
                                    </div>
                                </td>
                                <td class="price" data-title="Size">
                                    ${value.options.size == null ? `<p class="text-body">...</p>` : `<p class="text-body">${value.options.size} </p>`}
                                </td>
                                <td class="price" data-title="Price">
                                    <h4 class="text-body fs-6">$${value.price} </h4>
                                </td>
                                <td class="text-center detail-info" data-title="Stock">
                                    <div class="detail-extralink mr-15">
                                        <div class="detail-qty border radius">
                                            ${value.qty > 1
                                            ? `<a type="submit" class="qty-down" id="${value.rowId}" onclick="qtyDecrement(this.id)"><i class="fi-rs-angle-small-down"></i></a>`
                                            : `<a type="submit" class="qty-down" disabled><i class="fi-rs-angle-small-down"></i></a>`
                                            }
                                                <span class="qty-val">${value.qty}</span>
                                            ${value.qty < 10
                                            ? `<a type="submit" class="qty-up" id="${value.rowId}" onclick="qtyIncrement(this.id)"><i class="fi-rs-angle-small-up"></i></a>`
                                            : `<a type="submit" class="qty-up" disabled><i class="fi-rs-angle-small-up"></i></a>`
                                            }
                                        </div>
                                    </div>
                                </td>
                                <td class="price" data-title="Price">
                                    <h4 class="text-brand fs-4">$${value.subtotal} </h4>
                                </td>
                                <td class="action text-center" data-title="Remove"><a type="submit" class="text-body" id="${value.rowId}" onclick="cartRemoveItem(this.id)"><i class="fi-rs-trash"></i></a></td>
                            </tr>`
                });
                $('#cartPage').html(rows);
            }
        })
    }
    cart();

    //cart remove item
    function cartRemoveItem(id){
        $.ajax({
            type: 'GET',
            url: '/cart/remove/item/'+id,
            dataType: 'json',
            success:function(data){
                couponCalculation();
                couponCalculationCheckout();
                cart();
                miniCart();
                $('#couponField').show();
                $('#coupon_name').val('');
                
                const Toast = Swal.mixin({
                      toast: true,
                      position: 'top-end',
                      showConfirmButton: false,
                      timerProgressBar: true,
                      timer: 4000,
                      width: '450px',
                    })
                if ($.isEmptyObject(data.error)) {
                    Toast.fire({
                        type: 'success',
                        icon: 'success',
                        title: data.success
                    })
                }else{
                    Toast.fire({
                        type: 'error',
                        icon: 'error',
                        title: data.error
                    })
                }
            }
        })
    }

    //Quantity increment
    function qtyIncrement(rowId){
        $.ajax({
            type: 'GET',
            url: '/cart/qty/increment/'+rowId,
            dataType: 'json',
            success:function(data){
                couponCalculation();
                couponCalculationCheckout();
                cart();
                miniCart();
            }
        });
    }

    //Quantity decrement
    function qtyDecrement(rowId){
        $.ajax({
            type: 'GET',
            url: '/cart/qty/decrement/'+rowId,
            dataType: 'json',
            success:function(data){
                couponCalculation();
                couponCalculationCheckout();
                cart();
                miniCart();
            }
        });
    }
</script>

<!-- Coupon Apply -->
<script type="text/javascript">
    function applyCoupon(){
        var coupon_name = $('#coupon_name').val();
        $.ajax({
            type: 'POST',
            dataType: 'json',
            data: {coupon_name:coupon_name},
            url: "{{url('/coupon-apply')}}",
            success:function(data){
                couponCalculation();
                couponCalculationCheckout();

                if(data.validity == true){
                    $('#couponField').hide();
                }
                
                const Toast = Swal.mixin({
                      toast: true,
                      position: 'top-end',
                      showConfirmButton: false,
                      timerProgressBar: true,
                      timer: 4000,
                      width: '450px',
                    })
                if ($.isEmptyObject(data.error)) {
                    Toast.fire({
                        type: 'success',
                        icon: 'success',
                        title: data.success
                    })
                }else{
                    Toast.fire({
                        type: 'error',
                        icon: 'error',
                        title: data.error
                    })
                }
            }
        })
    }

    function couponCalculation(){
        $.ajax({
            type: 'GET',
            url: "{{url('/coupon-calculation')}}",
            dataType: 'json',
            success:function(data){
                if(data.wc_total){
                    $('#couponCalField').html(`
                        <tr>
                            <td class="cart_total_label">
                                <h6 class="text-muted">Subtotal:</h6>
                            </td>
                            <td class="cart_total_amount">
                                <h4 class="text-brand text-end">$${data.wc_subtotal}</h4>
                            </td>
                        </tr>
                        <tr>
                            <td class="cart_total_label">
                                <h6 class="text-muted">Tax:</h6>
                            </td>
                            <td class="cart_total_amount">
                                <h5 class="text-heading text-end">+$${data.wc_tax}</h4>
                            </td> 
                        </tr> 
                        <tr>
                            <td class="cart_total_label">
                                <h6 class="text-muted">Total:</h6>
                            </td>
                            <td class="cart_total_amount">
                                <h4 class="text-brand text-end">$${data.wc_total}</h4>
                            </td>
                        </tr>
                    `)
                }else{
                    $('#couponCalField').html(`
                        <tr>
                            <td class="cart_total_label">
                                <h6 class="text-muted">Subtotal:</h6>
                            </td>
                            <td class="cart_total_amount">
                                <h4 class="text-brand text-end">$${data.subtotal}</h4>
                            </td>
                        </tr>
                        <tr>
                            <td class="cart_total_label">
                                <h6 class="text-muted">Tax:</h6>
                            </td>
                            <td class="cart_total_amount">
                                <h5 class="text-heading text-end">+$${data.tax}</h4>
                            </td> 
                        </tr> 
                        <tr>
                            <td class="cart_total_label">
                                <h6 class="text-muted">Total:</h6>
                            </td>
                            <td class="cart_total_amount">
                                <h4 class="text-brand text-end">$${data.total}</h4>
                            </td>
                        </tr>
                        <tr>
                            <td class="cart_total_label">
                                <h6 class="text-muted">Coupon:</h6>
                            </td>
                            <td class="cart_total_amount">
                                <h5 class="text-heading text-end">${data.coupon_name} - ${data.discount}% <a type="submit" class="text-end" onclick="couponRemove()"><i class="fi-rs-trash"></i></a></h4>
                            </td> 
                        </tr> 
                        <tr>
                            <td class="cart_total_label">
                                <h6 class="text-muted">Discount:</h6>
                            </td>
                            <td class="cart_total_amount">
                                <h5 class="text-heading text-end">-$${data.discount_amount}</h4>
                            </td> 
                        </tr> 
                        <tr>
                            <td class="cart_total_label">
                                <h6 class="text-muted">Grand Total:</h6>
                            </td>
                            <td class="cart_total_amount">
                                <h4 class="text-brand text-end">$${data.total_amount}</h4>
                            </td>
                        </tr>
                    `)
                }
            }
        });
    }
    couponCalculation();
    couponCalculationCheckout();
</script>

<!-- coupon remove -->
<script type="text/javascript">
    function couponRemove(){
        $.ajax({
            type: 'GET',
            url: "{{url('/coupon-remove')}}",
            dataType: 'json',
            success:function(data){
                couponCalculation();
                couponCalculationCheckout();

                $('#couponField').show();
                $('#coupon_name').val('');

                const Toast = Swal.mixin({
                      toast: true,
                      position: 'top-end',
                      showConfirmButton: false,
                      timerProgressBar: true,
                      timer: 4000,
                      width: '450px',
                    })
                if ($.isEmptyObject(data.error)) {
                    Toast.fire({
                        type: 'success',
                        icon: 'success',
                        title: data.success
                    })
                }else{
                    Toast.fire({
                        type: 'error',
                        icon: 'error',
                        title: data.error
                    })
                }
            }
        });
    }
</script>

{{-- coupon checkout calculation --}}
<script type="text/javascript">
    function couponCalculationCheckout(){
        $.ajax({
            type: 'GET',
            url: "{{url('/coupon-calculation-checkout')}}",
            dataType: 'json',
            success:function(data){
                if(data.wc_total){
                    $('#couponCalCheckout').html(`
                            <div class="d-flex align-items-end justify-content-between mb-5">
                                <h6>Tax</h6>
                                <h6 class="text-muted">$${data.wc_tax}</h6>
                            </div>
                            <div class="d-flex align-items-end justify-content-between mb-10">
                                <h4>Total</h4>
                                <h4 class="text-brand">$${data.wc_total}</h4>
                            </div>
                    `)
                }else{
                    $('#couponCalCheckout').html(`
                        <div class="d-flex align-items-end justify-content-between mb-5">
                            <h6>Total</h6>
                            <h6 class="text-brand">$${data.total}</h6>
                        </div>
                        <div class="d-flex align-items-end justify-content-between mb-5">
                            <h6>Tax</h6>
                            <h6 class="text-muted">$${data.tax}</h6>
                        </div>
                        <div class="d-flex align-items-end justify-content-between mb-5">
                            <h6>Coupon Discount</h6>
                            <h6 class="text-muted">${data.coupon_name} - ${data.discount}% <a type="submit" class="text-end" onclick="couponRemove()"><i class="fi-rs-trash"></i></a></h6>
                        </div>
                        <div class="divider-2 mb-20"></div>
                        <div class="d-flex align-items-end justify-content-between mb-10">
                            <h4>Grand Total</h4>
                            <h4 class="text-brand">$${data.total_amount}</h4>
                        </div>s
                    `)
                }
            }
        });
    }
    couponCalculationCheckout();
</script>

</body>
</html>
